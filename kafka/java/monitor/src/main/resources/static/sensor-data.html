<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sensor Data</title>
  <link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <script src="/webjars/jquery/jquery.min.js"></script>
  <script src="/webjars/bootstrap/js/bootstrap.min.js"></script>
</head>
<body>
<div class="container">
  <h1>Sensor Data</h1>
  <table class="table table-striped">
    <thead>
    <tr>
      <th>Window Start</th>
      <th>Window End</th>
      <th>Air Quality</th>
      <th>Gas Resistance</th>
      <th>Humidity</th>
      <th>Indexed Air Quality</th>
      <th>Air Pressure</th>
      <th>Relative Humidity</th>
      <th>Room Temperature</th>
      <th>Air Temperature</th>
    </tr>
    </thead>
    <tbody id="sensor-data">
    <!-- Sensor data will be appended here by JavaScript -->
    </tbody>
  </table>
</div>
<script>
  $(document).ready(function () {
    $.ajax({
      url: "/sensor-data",
      method: "GET",
      success: function (data) {
        console.log("Fetched data:", data); // Log the data to check its structure
        var sensorDataHtml = '';
        data.forEach(function (sensor) {
          console.log("Processing sensor data:", sensor); // Log each sensor data item
          sensorDataHtml += '<tr>' +
                  '<td>' + sensor.windowStart + '</td>' +
                  '<td>' + sensor.windowEnd + '</td>' +
                  '<td>' + sensor.aggregate.averageAirQuality + '</td>' +
                  '<td>' + sensor.aggregate.averageGasResistance + '</td>' +
                  '<td>' + sensor.aggregate.averageHumidity + '</td>' +
                  '<td>' + sensor.aggregate.averageIndexedAirQuality + '</td>' +
                  '<td>' + sensor.aggregate.averageAirPressure + '</td>' +
                  '<td>' + sensor.aggregate.averageRelativeHumidity + '</td>' +
                  '<td>' + sensor.aggregate.averageRoomTemperature + '</td>' +
                  '<td>' + sensor.aggregate.averageAirTemperature + '</td>' +
                  '</tr>';
        });
        console.log("Generated HTML:", sensorDataHtml); // Log the generated HTML
        $('#sensor-data').html(sensorDataHtml);
      },
      error: function (error) {
        console.log("Error fetching sensor data", error);
      }
    });
  });
</script>
</body>
</html>
